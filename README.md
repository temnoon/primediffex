# primediffex
# README

## Prime Difference Explorer

Prime Explorer is a Python project that explores the properties of prime numbers. It generates prime numbers, calculates their second differences and second ratios, identifies specific sets of primes (such as twin primes, cousin primes, and others), and writes these results to various output files.

## How to Run the Prime Difference Explorer

1. Ensure that you have Python 3.6 or later installed.

2. Install the required Python packages by running `pip install -r requirements.txt` in your terminal. (This only needs to install sympy)

3. Modify the `config.json` file to specify your desired parameters for the prime number generation and analysis. The parameters you can specify are described in the "Configuration Parameters" section below.

4. I run the software with "primes, sd, sr, sd_sr_combinations, named_prime_sets = run_from_config('config.json')" in a Jupyter notebook, connected to the home directory of the app. 

5. The script will generate the prime numbers and perform the analyses as specified in your `config.json` file. The results will be written to output files in the same directory as the script.

## Configuration Parameters

In the `config.json` file, you can specify the following parameters:

- `num_bits`: The bit length of the generated primes. 

- `num_primes`: The number of primes to generate.

- `start_number`: The starting number for the prime number generation. If "random", a random start number will be chosen.

- `output_primes`: Whether to output a CSV file with the last 10 digits of each prime number, its second difference, and its second ratio.

- `output_second_differences`: Whether to output a CSV file with the counts and percentages of the second differences.

- `output_second_ratios`: Whether to output a CSV file with the counts and percentages of the second ratios.

- `output_sd_sr_combinations`: Whether to output a CSV file with the counts of the second difference-second ratio combinations.

- `output_named_prime_sets`: Whether to output a CSV file with the named prime sets (pairs of primes with specific gaps).

- `output_named_prime_sets_totals`: Whether to output a CSV file with the total counts of the named prime sets.

- `miller_rabin_iterations`: The number of iterations to use in the Miller-Rabin primality test.

## Output Files

The output files that can be generated by Prime Explorer are as follows:

-  Output Directory named [number of bits]'bits'[number of primes][timestamp]
   inside the output directory are the following files. 

- 'README.md': has information about the dataset, notably the full prime number, and the most significant digits of the prime that can be concatenated onto the left of the truncated primes which are used in the other output files. This keeps massive primes from taking up unnecessary space in the files. 

- `primes.csv`: Contains the last 10 digits of each prime number, its second difference, and its second ratio.

- `second_differences.csv`: Contains the counts and percentages of the second differences.

- `second_ratios.csv`: Contains the counts and percentages of the second ratios.

- `sd_sr_combinations.csv`: Contains the counts of the second difference-second ratio combinations.

- `named_prime_sets.csv`: Contains the named prime sets (pairs of primes with specific gaps, like 'twin primes').

- `named_prime_sets_totals.csv`: Contains the total counts of the named prime sets.

# Animations and Visualizations

In the Jupyter Notebook Primediffex0.21-w-Visualizations0.21.ipynb Animations and visualizations were introduced which use the primediffex output files to create visual output. 

Sure, here's an example of how you might add to your README to explain the new functions:

---

## How to Use

### Creating Animations

To create an animation, use the `run_config_animation(directory_path)` function. This function will create an animation based on the prime, second difference, and second ratio data in the specified directory.

```python
run_config_animation('your_directory_here')
```

This will create an animation showing how the prime number 'moves' in terms of its second difference and second ratio, and save it as an MP4 file in the specified directory.

### Charting Distributions

There are two functions for creating histograms of the second difference and second ratio distributions:

```python
plot_sd_distribution('your_file_primes.csv')
plot_sr_distribution('your_file_primes.csv')
```

These functions create a histogram showing the distribution of second differences or second ratios, and save the plot as a PNG file in the same directory as the input file. The filename will be the same as the input file's name, with '_sd_distribution_plot.png' or '_sr_distribution_plot.png' appended.

### Calculating Bias

To calculate the bias in the second differences or second ratios, use the `calculate_sd_bias(filename)` or `calculate_sr_bias(filename)` functions:

```python
calculate_sd_bias('your_file_here.csv')
calculate_sr_bias('your_file_here.csv')
```

These functions will return a bias score, which represents the bias towards positive or negative second differences or second ratios in the data. The score is a number between -1 and 1, where -1 indicates a bias towards negative values, 1 indicates a bias towards positive values, and 0 indicates no bias.

---

Let me know if you need further adjustments to this.


## Loading the Pickle File

Prime Explorer saves its state to a pickle file after each run. You can load this pickle file to inspect the state of the Prime Explorer at the end of its last run.

Here's a Python snippet that loads the pickle file:

```python
import pickle

with open('state.pkl', 'rb') as f:
    state = pickle.load(f)

# `state` is now a dictionary that contains the primes, second differences, second ratios, 
# second difference-second ratio combinations, and named prime sets generated in the last run.
```

Replace `'state.pkl'` with the path to your pickle file if it's different.

# Changelog

### Version 0.2.0
- **Added**: New parameter "prime_sets" in config file to specify which prime sets to find.
- **Changed**: Updated "find_named_prime_sets" function to only compute specified prime sets.
- **Fixed**: Bug where the software would calculate prime sets twice. 
- **Fixed**: Bug in the "auto" truncation mode that resulted in overly large truncations.

# README Additions

## Prime Sets
In addition to exploring prime second differences and second ratios, the Prime Difference Explorer can also find specific sets of primes. The software recognizes the following sets, each identified by the difference between the primes in the set:

- Twin primes (difference of 2)
- Cousin primes (difference of 4)
- Sexy primes (difference of 6)
- Octo primes (difference of 8)
- Deca primes (difference of 10)
- Dodeca primes (difference of 12)

To specify which sets you want the software to find, add a "prime_sets" parameter to your configuration file. The value should be a list of the differences that identify each set. For example, to find twin primes and cousin primes, your configuration file would include:

```json
"prime_sets": [2, 4]
```

If you want the software to find all the recognized sets, you would use:

```json
"prime_sets": [2, 4, 6, 8, 10, 12]
```

If the "prime_sets" parameter is omitted from the configuration file, the software will not find any prime sets.

The software outputs a CSV file for each prime set that it finds. The file contains each pair of primes in the set, identified by their last 10 digits. To reconstitute a full prime from a truncated prime, append the last 10 digits of the prime to the left digits specified in the README file for the dataset.

## Updates in Version 0.2.0
In this version, we added the ability to specify which prime sets you want the software to find. This allows you to focus on specific sets without having to compute all of them, which can save a significant amount of time and space when dealing with large prime sequences. We also fixed a bug where the software would calculate prime sets twice, and a bug in the "auto" truncation mode that resulted in overly large truncations.

## Updates in Version 0.2.1

"random_seed" now supported as a config parameter. Allows the usual control over randomness that seeds afford.

Pickle file now Gzip'd. 

truncation parameter "num_digits": "auto" allows the software to choose the smallest effective truncation when prime is large. 

Sample new config file

```json
{
"random_seed": 9999,
"num_bits": 256,
"num_primes": 10000,
"start_number": "random",
"write_output": true,
"output_primes": true,
"output_second_differences": true,
"output_second_ratios": true,
"output_sd_sr_combinations": true,
"output_named_prime_sets": true,
"output_named_prime_sets_totals": true,
"miller_rabin_iterations": 5,
"num_digits": "auto",
"prime_sets": [2, 4]
}
```


## Caveat

ChatGPT 4.0 was used in developing this code. 
